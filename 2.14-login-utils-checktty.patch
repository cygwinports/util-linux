--- origsrc/util-linux-ng-2.14.1/login-utils/checktty.c	2008-05-28 18:01:02.000000000 -0500
+++ src/util-linux-ng-2.14.1/login-utils/checktty.c	2009-01-06 20:32:01.360875000 -0600
@@ -20,6 +20,7 @@
 #include <sys/stat.h>
 #include <malloc.h>
 #include <netdb.h>
+#include <sys/socket.h>
 #include <sys/syslog.h>
 #include <ctype.h>
 #include "nls.h"
@@ -124,7 +125,7 @@ add_to_class(struct ttyclass *tc, char *
 static int
 isapty(const char *tty)
 {
-#ifdef __linux__
+#if defined __linux__ || defined __CYGWIN__
     char devname[100];
     struct stat stb;
 
